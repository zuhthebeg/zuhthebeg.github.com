<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î™®Îçò Ïà´Ïûê ÌçºÏ¶ê</title>
    <style>
        :root {
            --tile-size: min(20vw, 80px);
            --main-color: #2c3e50;
            --accent-color: #3498db;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            touch-action: manipulation;
        }

        #game-container {
            margin: 2vh auto;
            padding: 2vh;
            width: 95%;
            max-width: 400px;
        }

        #stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2vh;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: clamp(14px, 3vw, 16px);
        }

        #puzzle-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5vmin;
            background: var(--main-color);
            padding: 0.5vmin;
            border-radius: 8px;
            touch-action: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .tile {
            position: relative;
            width: var(--tile-size);
            height: var(--tile-size);
            background: white;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: calc(var(--tile-size) * 0.4);
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            transition: 
                transform 0.2s ease-in-out,
                background-color 0.3s ease;
            color: var(--main-color);
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
        }

        .tile::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: opacity 0.2s;
        }

        .tile:hover::after {
            opacity: 0.8;
        }

        .tile.moving {
            transform: scale(0.95);
            z-index: 1;
        }

        .empty {
            background: rgba(255, 255, 255, 0.1);
            box-shadow: none;
            cursor: default;
        }

        button {
            padding: 12px 24px;
            font-size: clamp(14px, 4vw, 16px);
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: 
                transform 0.2s,
                box-shadow 0.2s;
            margin-top: 2vh;
            width: 100%;
            max-width: 200px;
        }

        button:active {
            transform: scale(0.96);
        }

        @media (max-width: 480px) {
            .tile {
                font-size: calc(var(--tile-size) * 0.35);
            }
        }

        /* ÏÉâÏÉÅ Î≥ÄÎèô Ìö®Í≥º */
        .tile:nth-child(4n+1) { background: #ffeaa7; }
        .tile:nth-child(4n+2) { background: #fab1a0; }
        .tile:nth-child(4n+3) { background: #a29bfe; }
        .tile:nth-child(4n+4) { background: #55efc4; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="stats">
            <div>‚è± <span id="timer">0</span>Ï¥à</div>
            <div>üö∂‚ôÄÔ∏è <span id="moves">0</span>Ìöå</div>
        </div>
        <div id="puzzle-board"></div>
        <button onclick="shuffleTiles()">ÏÉà Í≤åÏûÑ</button>
    </div>

    <script>
        let moves = 0;
        let timer = 0;
        let timerInterval;
        const board = document.getElementById('puzzle-board');
        const tiles = [];

        function initGame() {
            for(let i = 1; i <= 15; i++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.textContent = i;
                tile.addEventListener('click', handleTileClick);
                tile.addEventListener('touchstart', handleTileClick, {passive: true});
                tiles.push(tile);
            }
            tiles.push(null);
            shuffleTiles();
        }

        function handleTileClick(e) {
            e.preventDefault();
            const number = parseInt(e.target.textContent);
            if(number) moveTile(number);
        }

        function shuffleTiles() {
            resetGame();
            let shuffledTiles = [...tiles.slice(0, 15)].sort(() => Math.random() - 0.5);
            shuffledTiles.push(null);
            updateBoard(shuffledTiles);
        }

        function moveTile(number) {
            const currentIndex = tiles.findIndex(t => t?.textContent == number);
            const emptyIndex = tiles.indexOf(null);
            
            if(isAdjacent(currentIndex, emptyIndex)) {
                animateMovement(currentIndex, emptyIndex);
                [tiles[currentIndex], tiles[emptyIndex]] = [tiles[emptyIndex], tiles[currentIndex]];
                moves++;
                document.getElementById('moves').textContent = moves;
                checkWin();
            }
        }

        function animateMovement(from, to) {
            tiles[from].classList.add('moving');
            setTimeout(() => {
                updateBoard(tiles);
                tiles[from].classList.remove('moving');
            }, 200);
        }

        function isAdjacent(a, b) {
            const rowA = Math.floor(a / 4);
            const colA = a % 4;
            const rowB = Math.floor(b / 4);
            const colB = b % 4;
            return Math.abs(rowA - rowB) + Math.abs(colA - colB) === 1;
        }

        function updateBoard(tileArray) {
            board.innerHTML = '';
            tileArray.forEach(tile => {
                if(tile) {
                    board.appendChild(tile);
                } else {
                    const empty = document.createElement('div');
                    empty.className = 'tile empty';
                    board.appendChild(empty);
                }
            });
        }

        function checkWin() {
            const currentOrder = tiles.map(t => t?.textContent).join(',');
            if(currentOrder === '1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,') {
                clearInterval(timerInterval);
                setTimeout(() => {
                    alert(`üéâ ÏÑ±Í≥µ!\nÏãúÍ∞Ñ: ${timer}Ï¥à\nÏù¥Îèô ÌöüÏàò: ${moves}Ìöå`);
                }, 300);
            }
        }

        function resetGame() {
            moves = 0;
            timer = 0;
            clearInterval(timerInterval);
            document.getElementById('moves').textContent = 0;
            document.getElementById('timer').textContent = 0;
            timerInterval = setInterval(() => {
                timer++;
                document.getElementById('timer').textContent = timer;
            }, 1000);
        }

        initGame();
    </script>
</body>
</html>